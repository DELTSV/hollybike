-- liquibase formatted sql

-- changeset macaron:1713557687290-1
CREATE TABLE "associations" ("id_association" INTEGER NOT NULL, "name" VARCHAR(255) NOT NULL, "status" INTEGER DEFAULT 1 NOT NULL, CONSTRAINT "associations_pk" PRIMARY KEY ("id_association"));

-- changeset macaron:1713557687290-2
CREATE TABLE "users" ("id_user" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "email" VARCHAR NOT NULL, "username" VARCHAR NOT NULL, "password" VARCHAR NOT NULL, "status" INTEGER DEFAULT 1 NOT NULL, "scope" INTEGER DEFAULT 1 NOT NULL, "association" INTEGER NOT NULL, "last_login" TIMESTAMP WITHOUT TIME ZONE NOT NULL, CONSTRAINT "users_pk" PRIMARY KEY ("id_user"));

-- changeset macaron:1713557687290-3
CREATE UNIQUE INDEX "associations_name_uindex" ON "associations"("name");

-- changeset macaron:1713557687290-4
CREATE UNIQUE INDEX "users_email_uindex" ON "users"("email");

-- changeset macaron:1713557687290-5
CREATE SEQUENCE  IF NOT EXISTS "user_id_seq" AS integer START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1;

-- changeset macaron:1713557687290-6
ALTER TABLE "users" ADD CONSTRAINT "users_associations_id_association_fk" FOREIGN KEY ("association") REFERENCES "associations" ("id_association") ON UPDATE NO ACTION ON DELETE NO ACTION;

